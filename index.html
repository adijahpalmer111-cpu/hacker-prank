<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>System Breach — Demo</title>
<style>
  :root { --lime: #00ff5f; --dark: #000; --warn: #ff3333; }
  html,body { height:100%; margin:0; background:var(--dark); color:var(--lime); font-family: monospace; }
  #startScreen {
    height:100vh; display:flex; align-items:center; justify-content:center; flex-direction:column;
    gap:1rem;
  }
  button#start {
    padding:1rem 2rem; font-size:1.2rem; border-radius:8px; border:none; cursor:pointer;
    background:transparent; color:var(--lime); border:1px solid rgba(0,255,95,0.25);
  }
  #prank {
    display:none; height:100vh; width:100vw; position:relative; overflow:hidden;
  }
  canvas#matrix { position:absolute; inset:0; z-index:1; background:black; }
  .overlay {
    position:absolute; left:0; right:0; top:0; bottom:0; z-index:2; display:flex;
    align-items:center; justify-content:center; flex-direction:column; pointer-events:none;
  }
  .big {
    font-size:4.2rem; letter-spacing:2px; text-align:center; pointer-events:auto;
    mix-blend-mode:screen; text-shadow:0 0 12px rgba(0,255,95,0.15);
  }
  .blink { animation:blink 900ms steps(1,start) infinite; color:var(--warn); }
  @keyframes blink { 50% { opacity:0; } }
  #submsg { margin-top:1rem; font-size:1.3rem; opacity:0.95; }
  #statusBox {
    margin-top:2rem; background:rgba(0,0,0,0.6); padding:1rem 1.5rem; border-radius:8px;
    border:1px solid rgba(255,0,0,0.12); font-size:1rem; max-width:90%; text-align:center;
  }
  #blackout {
    position:fixed; inset:0; background:black; z-index:9999; display:none;
    align-items:center; justify-content:center; color:#fff; font-size:1.6rem;
  }
  /* small footer after prank */
  #endNote { position:fixed; bottom:10px; left:10px; color:rgba(0,255,95,0.6); font-size:0.9rem; z-index:10000; display:none; }
</style>
</head>
<body>
  <div id="startScreen">
    <h1 style="color:var(--lime)">System Diagnostic Tool</h1>
    <p style="max-width:600px; text-align:center; color:rgba(0,255,95,0.85)">
      Click the button below to start the "System Diagnostic". (Required to enable full-screen and sound.)
    </p>
    <button id="start">Start Diagnostic</button>
  </div>

  <div id="prank" aria-hidden="true">
    <canvas id="matrix"></canvas>
    <div class="overlay" id="overlay">
      <div class="big blink" id="mainText">ERROR — YOU'VE BEEN HACKED</div>
      <div id="submsg">-- SYSTEM INTRUSION DETECTED --</div>
      <div id="statusBox">Initializing breach sequence...<br><span id="countdown"></span></div>
    </div>
  </div>

  <div id="blackout">
    <div id="blackMsg">System shutting down... please wait.</div>
  </div>

  <div id="endNote">Prank over — nothing was accessed. :)</div>

<script>
(() => {
  // Elements
  const startBtn = document.getElementById('start');
  const startScreen = document.getElementById('startScreen');
  const prank = document.getElementById('prank');
  const overlay = document.getElementById('overlay');
  const mainText = document.getElementById('mainText');
  const statusBox = document.getElementById('statusBox');
  const countdownEl = document.getElementById('countdown');
  const blackout = document.getElementById('blackout');
  const endNote = document.getElementById('endNote');
  const matrixCanvas = document.getElementById('matrix');
  const ctx = matrixCanvas.getContext('2d');

  // Matrix setup
  function resizeMatrix(){
    matrixCanvas.width = window.innerWidth;
    matrixCanvas.height = window.innerHeight;
    columns = Math.floor(matrixCanvas.width / fontSize);
    drops.length = columns;
    for (let i=0;i<columns;i++) if (!drops[i]) drops[i] = 1;
  }
  const fontSize = 18;
  let columns = Math.floor(window.innerWidth / fontSize);
  let drops = new Array(columns).fill(1);
  const chars = '01ABCDEFGHIJKLMNOPQRSTUVWXYZ@#&$%*+=-'.split('');

  function drawMatrix(){
    ctx.fillStyle = 'rgba(0,0,0,0.06)';
    ctx.fillRect(0,0,matrixCanvas.width,matrixCanvas.height);
    ctx.fillStyle = '#00ff5f';
    ctx.font = fontSize + 'px monospace';
    for (let i=0;i<drops.length;i++){
      const text = chars[Math.floor(Math.random()*chars.length)];
      ctx.fillText(text, i*fontSize, drops[i]*fontSize);
      if (drops[i]*fontSize > matrixCanvas.height && Math.random() > 0.985) drops[i]=0;
      drops[i]++;
    }
  }

  let matrixInterval;

  // WebAudio for beeps & alarm
  const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
  function beep(freq=800, duration=0.12, when=0){
    const o = audioCtx.createOscillator();
    const g = audioCtx.createGain();
    o.type = 'square';
    o.frequency.value = freq;
    g.gain.value = 0.0001;
    o.connect(g);
    g.connect(audioCtx.destination);
    const t = audioCtx.currentTime + when;
    g.gain.linearRampToValueAtTime(0.12, t + 0.005);
    g.gain.exponentialRampToValueAtTime(0.0001, t + duration);
    o.start(t);
    o.stop(t + duration + 0.02);
  }
  function alarmSweep(start=400, end=1400, length=1.2){
    const o = audioCtx.createOscillator();
    const g = audioCtx.createGain();
    o.type = 'sawtooth';
    o.frequency.setValueAtTime(start, audioCtx.currentTime);
    o.frequency.exponentialRampToValueAtTime(end, audioCtx.currentTime + length);
    o.connect(g);
    g.connect(audioCtx.destination);
    g.gain.setValueAtTime(0.0001, audioCtx.currentTime);
    g.gain.linearRampToValueAtTime(0.18, audioCtx.currentTime + 0.02);
    g.gain.exponentialRampToValueAtTime(0.0001, audioCtx.currentTime + length);
    o.start();
    o.stop(audioCtx.currentTime + length + 0.03);
  }

  // Prank sequence
  async function startPrank(){
    // Hide start screen and request fullscreen
    startScreen.style.display = 'none';
    prank.style.display = 'block';
    try {
      await document.documentElement.requestFullscreen();
    } catch(e){ /* fullscreen may be blocked */ }

    // start matrix animation
    resizeMatrix();
    matrixInterval = setInterval(drawMatrix, 45);

    // quick startup beeps
    beep(900,0.08); beep(700,0.08,0.12); beep(1000,0.08,0.26);

    // escalate messages
    setTimeout(()=> {
      document.getElementById('submsg').textContent = '-- INTRUSION: REMOTE ACCESS GRANTED --';
      beep(600,0.15);
    }, 1800);

    setTimeout(()=> {
      mainText.textContent = 'YOU\'VE BEEN HACKED';
      mainText.classList.add('blink');
      alarmSweep(500,1200,0.9);
    }, 3000);

    // show password-access msg then countdown
    setTimeout(()=> {
      statusBox.innerHTML = 'All your passwords are accessed. System will shutdown in: <span id="cd">10</span> seconds';
      let cd = 10;
      const cdEl = document.getElementById('cd');
      const cdTimer = setInterval(()=> {
        cd--;
        cdEl.textContent = cd;
        beep(400 + (10-cd)*40, 0.06);
        if (cd<=0){
          clearInterval(cdTimer);
          // trigger fake shutdown
          triggerBlackout();
        }
      }, 1000);
    }, 5000);
  }

  function triggerBlackout(){
    // dramatic final sounds
    alarmSweep(300,1800,1.4);
    beep(220,0.5,0.9);
    // show blackout
    blackout.style.display = 'flex';
    // stop matrix and hide overlay text
    clearInterval(matrixInterval);
    overlay.style.display = 'none';
    // keep black for ~20s then restore
    setTimeout(()=> {
      blackout.style.display = 'none';
      restore();
    }, 20000);
  }

  function restore(){
    // show "prank over", small note
    endNote.style.display = 'block';
    mainText.textContent = 'PRANK OVER — NOTHING WAS ACCESSED';
    mainText.classList.remove('blink');
    overlay.style.display = 'flex';
    statusBox.innerHTML = 'Relax. This was only a visual prank.';
    // restart matrix gently
    drops = new Array(Math.floor(window.innerWidth / fontSize)).fill(1);
    matrixInterval = setInterval(drawMatrix, 65);
    // exit fullscreen if user wants (we won't force it)
    // show short confirmation beep
    beep(1000, 0.09);
  }

  // safety: ensure resize works
  window.addEventListener('resize', resizeMatrix);

  // Start button action
  startBtn.addEventListener('click', async () => {
    // resume audio context on user gesture (required by many browsers)
    if (audioCtx.state === 'suspended') await audioCtx.resume();
    startPrank();
  });

  // Prevent misuse note on right-click (non-blocking)
  document.addEventListener('contextmenu', e => {
    // allow context menu (do not block) — we keep it polite
  });

  // Optional: allow Esc to quit fullscreen quickly (browser handles this)
})();
</script>
</body>
</html>
